<div class="container mt-4">
  <h3>{{ modoEdicion ? 'Editar Categoría' : 'Crear Nueva Categoría' }}</h3>
  <div class="mb-3 text-end">
  <button class="btn btn-outline-secondary btn-sm" (click)="volver()"><i class="bi bi-arrow-left-circle"></i> Volver</button>
</div>


  <form #form="ngForm" (ngSubmit)="form.valid && guardar()" class="mt-3">

    <!-- Nombre -->
    <div class="mb-3">
      <label class="form-label">Nombre</label>
      <input [(ngModel)]="categoria.nombre" name="nombre" required class="form-control"
             [class.is-invalid]="form.submitted && form.controls['nombre'].invalid">
      <div *ngIf="form.submitted && form.controls['nombre'].invalid" class="invalid-feedback">
        El nombre es obligatorio.
      </div>
    </div>

    <!-- Descripción -->
    <div class="mb-3">
      <label class="form-label">Descripción</label>
      <textarea [(ngModel)]="categoria.descripcion" name="descripcion" required class="form-control"
                [class.is-invalid]="form.submitted && form.controls['descripcion'].invalid"></textarea>
      <div *ngIf="form.submitted && form.controls['descripcion'].invalid" class="invalid-feedback">
        La descripción es obligatoria.
      </div>
    </div>

    <!-- Imagen -->
    <div class="mb-3">
      <label class="form-label">Imagen (URL)</label>
      <input [(ngModel)]="categoria.imagen" name="imagen" required class="form-control"
             [class.is-invalid]="form.submitted && form.controls['imagen'].invalid">
      <div *ngIf="form.submitted && form.controls['imagen'].invalid" class="invalid-feedback">
        La imagen es obligatoria.
      </div>
    </div>

    <!-- Estado -->
    <div class="mb-3">
      <label class="form-label">Estado</label>
      <select [(ngModel)]="categoria.estado" name="estado" required class="form-select">
        <option [value]="true">Activa</option>
        <option [value]="false">Inactiva</option>
      </select>
    </div>

    <!-- Modal de éxito -->
    <div class="modal fade" id="modalExito" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-success text-white">
            <h5 class="modal-title">¡Éxito!</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <p>{{ mensajeModal }}</p>
          </div>
        </div>
      </div>
    </div>

    <button class="btn btn-primary" [disabled]="form.invalid">
      {{ modoEdicion ? 'Actualizar' : 'Guardar' }}
    </button>
  </form>
</div>
